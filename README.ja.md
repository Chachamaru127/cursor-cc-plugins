# cursor-cc-plugins v3.0

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Claude Code Plugin](https://img.shields.io/badge/Claude%20Code-Plugin-blue)](https://docs.anthropic.com/en/docs/claude-code)
[![Safety First](https://img.shields.io/badge/Safety-First-green)](docs/ADMIN_GUIDE.md)

**自然言語だけで高品質なプロジェクトを開発できる**

VibeCoder（技術知識がなくても開発したい人）向けの Claude Code 開発ワークフロープラグイン。オプションで Cursor との2エージェント協調もサポート。

> **v3.0 ハイライト**: セーフティファースト設計。設定可能な動作モード、パス制限、事前/事後レポート機能を追加。チーム導入は [Admin Guide](docs/ADMIN_GUIDE.md) を参照。

[English](README.md) | 日本語

![2つのAI、1つのシームレスなワークフロー - Cursorが計画、Claude Codeが構築](docs/images/workflow-ja.png)

---

## 🚀 クイックスタート: モードを選択

**まず、どのモードで開発するか決めてください：**

| モード | 最初に話す相手 | おすすめ |
|--------|---------------|----------|
| **🅰️ Solo** | Claude Code | 個人プロジェクト、クイックプロトタイプ |
| **🅱️ 2-Agent** | **Cursor** | チームプロジェクト、正式な計画が必要な場合 |

### 🅰️ Solo モード（Claude Code のみ）

```bash
# 1. インストール
/plugin marketplace add Chachamaru127/cursor-cc-plugins
/plugin install cursor-cc-plugins

# 2. 開始
「ブログアプリを作りたい」

# 3. 以上！
```

### 🅱️ 2-Agent モード（Cursor + Claude Code）

```
⚠️ 最初は Cursor に相談！Claude Code ではない！

1. [Cursor] 「ブログアプリを作りたい」
   → Cursor が計画作成 → /assign-to-cc

2. [あなた] タスクをコピー → Claude Code に貼り付け

3. [Claude Code] /start-task → 実装 → /handoff-to-cursor

4. [あなた] 結果をコピー → Cursor に貼り付け

5. [Cursor] レビュー → 本番デプロイ
```

> 💡 Claude Code で `/setup-2agent` を実行して必要なファイルをセットアップ。

---

## ⚡ v2 からのアップグレード

| 質問 | 回答 |
|------|------|
| プロジェクトが壊れる？ | **いいえ** - v2 のコマンドはそのまま動く |
| v3 で何が変わった？ | セーフティ設定、Skill/Workflow/Profile アーキテクチャ |
| 何か変更が必要？ | Advanced モード機能を使いたい場合のみ |

**破壊的変更**: なし。Simple モード = v2 と同じ。

### 何が変わったか（Before/After）

**コマンド** - 変更不要:
```
# v2（v3でもそのまま動く）      # v3（同じ動作）
/init                      →    /init
/plan                      →    /plan
/work                      →    /work
「ログイン機能を追加して」   →    「ログイン機能を追加して」
```

**v3 の新機能** - オプション:
```
# v2: セーフティ設定なし
# v3: cursor-cc.config.json でチーム向けガードレール
{
  "safety": { "mode": "apply-local" },
  "git": { "protected_branches": ["main"] }
}

# v2: スキルはプラグイン内に埋め込み
# v3: スキルは編集可能な SKILL.md ファイル
skills/worker/ccp-my-custom-skill/SKILL.md  ← 自作スキル追加可能！
```

---

## 目次

1. [このプラグインでできること](#1-このプラグインでできること) - コマンドとその目的
2. [セーフティと設定](#2-セーフティと設定) - 設定可能なセーフティモード
3. [Claude Code への話しかけ方](#3-claude-code-への話しかけ方) - 自然言語 → どの機能が動くか
4. [問題が起きたとき](#4-問題が起きたとき) - トラブルシューティングと復旧
5. [開発フローの全体像](#5-開発フローの全体像) - アイデアから完成までの流れ
6. [上級編：2エージェント協調](#6-上級編2エージェント協調) - Cursor + Claude Code のオプション設定
7. [アーキテクチャ](#7-アーキテクチャ) - Skill/Workflow/Profile アーキテクチャと SkillPort 連携

---

## 1. このプラグインでできること

このプラグインは開発プロセス全体を自動化する **8つのコマンド** を提供します。それぞれの役割と必要な理由を説明します：

### コアコマンド

| コマンド | 何をするか | なぜ必要か |
|---------|-----------|-----------|
| `/init` | アイデアについて質問し、技術を提案し、プロジェクトを作成 | **ここから始める** - ぼんやりしたアイデアを実際のプロジェクトに変える |
| `/plan` | 機能リクエストを整理されたタスクに分解 | **作る前に** - 明確なロードマップでカオスを防ぐ |
| `/work` | 計画されたタスクを実行し、実際のコードを書く | **構築フェーズ** - 重労働を担当 |
| `/review` | セキュリティ、パフォーマンス、品質の問題をチェック | **品質ゲート** - 問題が大きくなる前にキャッチ |

### サポートコマンド

| コマンド | 何をするか | なぜ必要か |
|---------|-----------|-----------|
| `/sync-status` | 現在の進捗と残りのタスクを表示 | **現在地を把握** - いつでも状況がわかる |
| `/start-task` | 計画から次のタスクを開始 | **勢いを維持** - 次に何をするか迷わない |
| `/handoff-to-cursor` | 完了レポートを作成（2エージェント設定用） | **チーム引き継ぎ** - エージェント間のきれいなコミュニケーション |
| `/setup-2agent` | 2エージェント協調を設定（オプション） | **チームセットアップ** - Cursor + Claude Code ワークフローを有効化 |
| `/health-check` | 環境を診断し、使用可能な機能を表示 | **トラブルシューティング** - セットアップが正しいか確認 |

### 自動機能（コマンド不要）

| 機能 | 何をするか | いつ動くか |
|------|-----------|-----------|
| **セッションメモリ** | 前回のセッションでやったことを記憶 | 過去の作業について聞いたとき |
| **エラー回復** | ビルド/テストエラーを自動修正（最大3回） | エラーが検出されたとき |
| **並列処理** | 独立したタスクを同時に実行 | 複数タスクが互いに依存しないとき |
| **トラブルシュート** | 問題を診断し、修正を提案 | 何かが壊れたと言ったとき |

---

## 2. セーフティと設定

v3.0 では**セーフティファースト設計**を導入。設定可能な動作モードで、意図しない破壊的操作から保護します。

### セーフティモード

| モード | 動作 | 使用場面 |
|--------|------|---------|
| `dry-run` | 何が起きるか表示、変更なし | **デフォルト** - 安全に探索 |
| `apply-local` | ローカルで変更、push なし | 開発時 - 最も一般的 |
| `apply-and-push` | git push を含む完全自動化 | CI/CD 統合（注意!） |

### クイックセットアップ

プロジェクトルートに `cursor-cc.config.json` を作成：

```json
{
  "safety": {
    "mode": "apply-local",
    "require_confirmation": true
  },
  "git": {
    "allow_auto_commit": false,
    "allow_auto_push": false,
    "protected_branches": ["main", "master"]
  },
  "paths": {
    "allowed_modify": ["src/", "app/", "components/"],
    "protected": [".github/", ".env", "secrets/"]
  }
}
```

### デフォルトで保護されるもの

| 権限 | デフォルト | 制御 |
|------|---------|------|
| ファイル読み取り | ✅ 有効 | - |
| ファイル書き込み | ✅ 有効 | `paths.allowed_modify` |
| git commit | ❌ 無効 | `git.allow_auto_commit` |
| git push | ❌ 無効 | `git.allow_auto_push` |
| rm -rf | ❌ 無効 | `destructive_commands.allow_rm_rf` |
| npm install | ✅ 有効 | `destructive_commands.allow_npm_install` |

### 事前/事後レポート

危険な可能性のある操作はすべて以下を表示：
- **事前サマリ**: 何をするか、どのファイルに影響するか
- **事後レポート**: 何をしたか、何が変わったか

これにより完全な透明性と監査可能性を確保します。

### チーム導入

[Admin Guide](docs/ADMIN_GUIDE.md) を参照：
- 推奨設定（個人/チーム/エンタープライズ）
- 機能ごとのリスク評価
- よくある問題のトラブルシューティング

### 制限事項

[Limitations](docs/LIMITATIONS.md) を参照：
- 対応 OS と CI プロバイダー
- Claude Code CLI vs Web の制限
- 既知の問題と回避策

---

## 3. Claude Code への話しかけ方

コマンドを覚える必要はありません。やりたいことを自然に話すだけで、適切な機能が自動的に起動します。

### プロジェクトを始める

| 言い方 | 裏で何が起きるか |
|--------|-----------------|
| 「ブログを作りたい」 | → **`/init`** が起動: 質問 → 技術提案 → プロジェクト生成 |
| 「レシピ共有アプリを作って」 | → **`/init`** が起動: 同じフロー、説明に合わせて調整 |
| 「タスク管理の新しいプロジェクトを始めたい」 | → **`/init`** が起動: 要件分析 → 構造提案 |

**会話例：**
```
あなた: 「レシピ共有アプリを作りたい」

Claude Code (/init 実行中):
「ビジョンをもっと理解させてください：
 1. 誰が使うアプリですか？
 2. 好きな類似アプリは？
 3. 一番大事な機能は？」

あなた: 「家庭の料理人、Cookpadが好き、お気に入り保存が重要」

Claude Code:
「おすすめ: Next.js + Supabase + Tailwind
 プロジェクトを作成中...」
 ✅ プロジェクト作成完了！
```

---

### 機能を追加する

| 言い方 | 裏で何が起きるか |
|--------|-----------------|
| 「ログイン機能を追加して」 | → **`/plan`** が起動: タスク分解 → **`/work`** が実行 |
| 「レシピを保存できるようにしたい」 | → **`/plan`** が起動: ロードマップ作成 → **`/work`** が構築 |
| 「検索機能を追加」 | → **`/plan`** + **`/work`**: 計画して実装 |

**会話例：**
```
あなた: 「ログイン機能を追加して」

Claude Code (/plan 実行中):
「タスクに分解します：
 - [ ] ログインページ作成
 - [ ] サインアップページ作成
 - [ ] 認証を接続
 Plans.md に追加中...」

Claude Code (/work 実行中):
「フェーズ1を実装中...」
 ✅ src/app/login/page.tsx を作成
 ✅ src/app/signup/page.tsx を作成
 ✅ Supabase Auth を接続
「完了！『動かして』と言えばテストできます」
```

---

### 動かしてテストする

| 言い方 | 裏で何が起きるか |
|--------|-----------------|
| 「動かして」 | → 開発サーバーを起動、ブラウザで開く |
| 「見せて」 | → 「動かして」と同じ |
| 「テストして」 | → 自動テストがあれば実行 |

**例：**
```
あなた: 「動かして」

Claude Code:
「開発サーバーを起動中...
 🌐 http://localhost:3000 を開いてください」
```

---

### 品質をチェックする

| 言い方 | 裏で何が起きるか |
|--------|-----------------|
| 「チェックして」 | → **`/review`** が起動: セキュリティ、パフォーマンス、品質スキャン |
| 「コードをレビューして」 | → **`/review`** が起動: 同じ包括的チェック |
| 「大丈夫？」 | → **`/review`** が起動: 見つかった問題を報告 |

**例：**
```
あなた: 「大丈夫かチェックして」

Claude Code (/review 実行中):
「品質チェック中...

 ✅ セキュリティ: 脆弱性なし
 ✅ パフォーマンス: 良好（遅いクエリなし）
 ⚠️  コード品質: 軽微な提案2件
     - 45行目にエラーハンドリング追加を検討
     - 12行目に未使用のインポート

 総合: 本番環境にデプロイ可能！」
```

---

### 進捗を確認する

| 言い方 | 裏で何が起きるか |
|--------|-----------------|
| 「今の状況は？」 | → **`/sync-status`** が起動: 完了タスクと残りを表示 |
| 「どれくらい終わった？」 | → **`/sync-status`** が起動: 進捗サマリー |
| 「次は何？」 | → **`/start-task`** が起動: 次のタスクを開始 |

**例：**
```
あなた: 「今の状況は？」

Claude Code (/sync-status 実行中):
「📊 プロジェクト状況:

 ✅ 完了 (3件):
    - ユーザーログイン
    - レシピアップロード
    - 画像保存

 🔄 進行中 (1件):
    - コメント機能

 📋 残り (2件):
    - 検索機能
    - ユーザープロフィール

 進捗: 60% 完了」
```

---

### 休憩後に再開する

| 言い方 | 裏で何が起きるか |
|--------|-----------------|
| 「前回何をした？」 | → **セッションメモリ** が起動: 前回のセッションを思い出す |
| 「続きから」 | → **セッションメモリ** + **`/start-task`**: 作業を再開 |
| 「中断したところから」 | → 上と同じ |

**例：**
```
あなた: 「前回何をした？」

Claude Code (セッションメモリ):
「前回のセッション (12月7日):
 ✅ 完了: ユーザーログイン、レシピアップロード
 🔄 中断: コメント機能 (50% 完了)

 コメント機能を続けますか？」

あなた: 「うん、続けて」

Claude Code (/work 実行中):
「コメント機能の実装を再開中...」
```

---

## 4. 問題が起きたとき

問題は起きます。対処方法はこちら：

### 何かが壊れた

| 言い方 | 裏で何が起きるか |
|--------|-----------------|
| 「壊れた」 | → **トラブルシュート** が起動: 問題を診断 |
| 「動かない」 | → **トラブルシュート** が起動: エラーログを分析 |
| 「このエラーを直して」 | → **エラー回復** が起動: 最大3回自動修正 |

**例：**
```
あなた: 「壊れた」

Claude Code (トラブルシュート):
「🔍 診断中...

 発見: データベース接続エラー
 原因: 環境変数 SUPABASE_URL が未設定

 🔧 自動修正中...」

Claude Code (エラー回復):
「✅ 修正完了！不足していた環境変数を追加しました。
 もう一度『動かして』と言ってください。」
```

### 迷ったとき

| 言い方 | 裏で何が起きるか |
|--------|-----------------|
| 「どうすればいい？」 | → **VibeCoder ガイド** が起動: 状況に応じた次のアクションを提案 |
| 「詰まった」 | → **VibeCoder ガイド** が起動: 状況を分析、選択肢を提示 |
| 「助けて」 | → 現在の状態で可能なアクションを表示 |

**例：**
```
あなた: 「次は何をすればいい？」

Claude Code (VibeCoder ガイド):
「現在の進捗に基づくと：

 ✅ ログイン機能は完了
 🔄 コメント機能は50%完了

 おすすめ：
 1. 『コメントを続けて』 - 始めたものを完成させる
 2. 『チェックして』 - これまでの成果をレビュー
 3. 『動かして』 - 現在の機能をテスト

 どうしますか？」
```

---

## 5. 開発フローの全体像

アイデアから完成までの典型的なプロジェクトの流れ：

```
╔═══════════════════════════════════════════════════════════════════════════════╗
║                           開発の旅路                                           ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                                ║
║  フェーズ1: アイデア → プロジェクト                                            ║
║  ────────────────────────────────                                              ║
║                                                                                ║
║    あなた: 「〇〇を作りたい」                                                   ║
║                │                                                               ║
║                ▼                                                               ║
║    ┌─────────────────────────────────────────┐                                ║
║    │  /init                                  │                                ║
║    │  • 明確化の質問をする                   │                                ║
║    │  • 技術を推奨                           │                                ║
║    │  • プロジェクト構造を作成               │                                ║
║    └─────────────────────────────────────────┘                                ║
║                │                                                               ║
║                ▼                                                               ║
║    ✅ プロジェクト作成完了！                                                   ║
║                                                                                ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                                ║
║  フェーズ2: 機能開発ループ                                                      ║
║  ─────────────────────────                                                     ║
║                                                                                ║
║         ┌──────────────────────────────────────────────────────────┐          ║
║         │                                                          │          ║
║         ▼                                                          │          ║
║    あなた: 「〇〇機能を追加して」                                    │          ║
║         │                                                          │          ║
║         ▼                                                          │          ║
║    ┌─────────────────────────────────────────┐                     │          ║
║    │  /plan                                  │                     │          ║
║    │  • 機能をタスクに分解                   │                     │          ║
║    │  • Plans.md に追加                      │                     │          ║
║    └─────────────────────────────────────────┘                     │          ║
║         │                                                          │          ║
║         ▼                                                          │          ║
║    ┌─────────────────────────────────────────┐                     │          ║
║    │  /work                                  │                     │          ║
║    │  • 実際のコードを書く                   │                     │          ║
║    │  • ファイルを作成                       │                     │          ║
║    │  • コマンドを実行 (npm install など)    │                     │          ║
║    └─────────────────────────────────────────┘                     │          ║
║         │                                                          │          ║
║         ▼                                                          │          ║
║    あなた: 「動かして」                                              │          ║
║         │                                                          │          ║
║         ▼                                                          │          ║
║    ┌─────────────────────────────────────────┐                     │          ║
║    │  開発サーバーが起動                     │                     │          ║
║    │  • ブラウザでテスト                     │                     │          ║
║    └─────────────────────────────────────────┘                     │          ║
║         │                                                          │          ║
║         ▼                                                          │          ║
║    ┌─────────────────┐     ┌─────────────────┐                     │          ║
║    │ うまくいった？   │────▶│ 「次の機能を    │─────────────────────┘          ║
║    │ はい ✅         │     │  追加して」     │                                ║
║    └────────┬────────┘     └─────────────────┘                                ║
║             │ いいえ ❌                                                        ║
║             ▼                                                                  ║
║    ┌─────────────────────────────────────────┐                                ║
║    │  あなた: 「壊れた」または「直して」       │                                ║
║    │                                         │                                ║
║    │  エラー回復:                            │                                ║
║    │  • 問題を診断                           │                                ║
║    │  • 自動修正（最大3回）                  │                                ║
║    │  • 直せない場合は報告                   │                                ║
║    └─────────────────────────────────────────┘                                ║
║                                                                                ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                                ║
║  フェーズ3: 品質チェック                                                        ║
║  ───────────────────────                                                       ║
║                                                                                ║
║    あなた: 「チェックして」または「レビューして」                                ║
║         │                                                                      ║
║         ▼                                                                      ║
║    ┌─────────────────────────────────────────┐                                ║
║    │  /review                                │                                ║
║    │  • セキュリティスキャン                 │                                ║
║    │  • パフォーマンスチェック               │                                ║
║    │  • コード品質分析                       │                                ║
║    │  • 改善を提案                           │                                ║
║    └─────────────────────────────────────────┘                                ║
║         │                                                                      ║
║         ▼                                                                      ║
║    ✅ 品質レポート生成完了                                                     ║
║                                                                                ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                                ║
║  フェーズ4: セッション管理                                                      ║
║  ─────────────────────────                                                     ║
║                                                                                ║
║    ┌─────────────────────────────────────────┐                                ║
║    │  セッション終了？                       │                                ║
║    │                                         │                                ║
║    │  セッションメモリが自動保存：           │                                ║
║    │  • 完了したこと                         │                                ║
║    │  • 進行中のこと                         │                                ║
║    │  • 重要な決定事項                       │                                ║
║    └─────────────────────────────────────────┘                                ║
║                                                                                ║
║    次のセッション:                                                              ║
║    あなた: 「前回何をした？」                                                   ║
║         │                                                                      ║
║         ▼                                                                      ║
║    ┌─────────────────────────────────────────┐                                ║
║    │  セッションメモリが思い出す：           │                                ║
║    │  • 前回の作業                           │                                ║
║    │  • 未完了のタスク                       │                                ║
║    │  • コンテキストと決定事項               │                                ║
║    └─────────────────────────────────────────┘                                ║
║         │                                                                      ║
║         ▼                                                                      ║
║    あなた: 「続けて」 → フェーズ2に戻る                                         ║
║                                                                                ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                                ║
║  フェーズ5: 完成                                                                ║
║  ─────────────                                                                 ║
║                                                                                ║
║    全機能完了？                                                                 ║
║         │                                                                      ║
║         ▼                                                                      ║
║    あなた: 「もう一度全部チェックして」                                         ║
║         │                                                                      ║
║         ▼                                                                      ║
║    ┌─────────────────────────────────────────┐                                ║
║    │  /review (最終)                         │                                ║
║    │  • 完全なセキュリティ監査               │                                ║
║    │  • パフォーマンス最適化                 │                                ║
║    │  • デプロイ準備完了                     │                                ║
║    └─────────────────────────────────────────┘                                ║
║         │                                                                      ║
║         ▼                                                                      ║
║    🎉 アプリ完成！                                                             ║
║                                                                                ║
╚═══════════════════════════════════════════════════════════════════════════════╝
```

---

## 実例：Todo アプリを作る

完全なフローを示す具体例：

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1日目: はじめる
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

あなた: 「Todoアプリを作りたい」
     └─→ /init が起動
         • 質問: 「個人用？チーム用？期限は必要？カテゴリは？」
         • 回答: 「個人用、期限あり、カテゴリなし」
         • Next.js + Tailwind プロジェクトを作成

あなた: 「動かして」
     └─→ localhost:3000 で開発サーバーを起動
         • 空白のスターターページが表示される

あなた: 「Todoを作成できるようにして」
     └─→ /plan が起動: タスクリストを作成
     └─→ /work が起動: 機能を構築
         ✅ Todo入力フォームを作成
         ✅ データベースに追加

あなた: 「動かして」
     └─→ テスト: Todoが作成できるようになった！

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
2日目: 機能を追加
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

あなた: 「前回何をした？」
     └─→ セッションメモリが起動
         • 「昨日: Todoアプリを作成、Todo作成機能を追加」
         • 「続けますか？」

あなた: 「期限を追加して」
     └─→ /plan + /work
         ✅ 日付ピッカーを追加
         ✅ データベーススキーマを更新

あなた: 「完了マークをつけられるようにして」
     └─→ /plan + /work
         ✅ チェックボックス機能を追加
         ✅ 取り消し線スタイルを追加

あなた: 「チェックして」
     └─→ /review が起動
         ✅ セキュリティ: OK
         ✅ パフォーマンス: OK
         ⚠️ 提案: ローディング状態を追加

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
3日目: 仕上げ
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

あなた: 「削除機能を追加して」
     └─→ /plan + /work
         ✅ 削除ボタンを追加
         ✅ 確認ダイアログを追加

あなた: 「もっときれいにして」
     └─→ /work がスタイリングを適用
         ✅ シャドウ付きのモダンUI
         ✅ スムーズなアニメーション

あなた: 「もう一度全部チェックして」
     └─→ /review (包括的)
         ✅ すべてのチェックに合格
         🎉 デプロイ準備完了！

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
結果: 作成・期限・完了・削除機能を持つ完全なTodoアプリ
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## 6. 上級編：2エージェント協調

> **このセクションはオプションです。** ほとんどのユーザーは Claude Code 単体で使えます。これは、Cursor と Claude Code で責任を分担したいチーム向けです。

### 仕組み

**あなたがハブです。** Cursor と Claude Code は直接通信しません。あなたが指示と結果をコピー&ペーストして橋渡しします。

```
┌─────────────┐          ┌─────────┐          ┌──────────────┐
│   Cursor    │  ──────► │  あなた  │  ──────► │ Claude Code  │
│   (PM)      │ タスク作成│ (ハブ)   │ タスク貼付│  (Worker)    │
│             │ ◄────── │         │ ◄────── │              │
│             │  確認    │         │ 結果コピー│              │
└─────────────┘          └─────────┘          └──────────────┘
```

### 2エージェント設定を使う場面

- 実装前に正式な計画が必要な大規模プロジェクト
- Cursor を設計/レビューに、Claude Code をコーディングに集中させたい場合
- 計画と実行を明確に分けたいプロジェクト

### 役割

| エージェント | 役割 | 責任 |
|-------------|------|------|
| **Cursor** | PM（プロジェクトマネージャー） | 計画、タスク作成、コードレビュー、本番デプロイ判断 |
| **Claude Code** | Worker（開発者） | 実装、テスト、ステージングデプロイ、完了報告 |
| **あなた** | ハブ（コーディネーター） | Cursor → Claude Code へタスクをコピー、結果を戻す |

### ワークフロー

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         2エージェント協調フロー                              │
│                                                                             │
│                         ┌─────────────────────┐                             │
│                         │       あなた         │                             │
│                         │  (コーディネーター)   │                             │
│                         └──────────┬──────────┘                             │
│                                    │                                        │
│   ┌────────────────────────────────┼────────────────────────────────┐       │
│   │                                │                                │       │
│   ▼                                │                                ▼       │
│ ┌──────────────────┐               │               ┌──────────────────┐     │
│ │     Cursor       │               │               │   Claude Code    │     │
│ │      (PM)        │               │               │    (Worker)      │     │
│ └────────┬─────────┘               │               └────────┬─────────┘     │
│          │                         │                        │               │
│          │ 1. 計画作成             │                        │               │
│          │    /assign-to-cc        │                        │               │
│          │                         │                        │               │
│          └──────────────────────►  │ 2. タスクを            │               │
│                                    │    Claude Codeへコピー  │               │
│                                    │ ─────────────────────► │               │
│                                    │                        │               │
│                                    │                        │ 3. /start-task│
│                                    │                        │    /plan      │
│                                    │                        │    /work      │
│                                    │                        │               │
│                                    │ 4. 結果を              │               │
│          ◄──────────────────────── │    Cursorへコピー      │               │
│          │                         │ ◄───────────────────── │               │
│          │                         │    /handoff-to-cursor  │               │
│          │ 5. レビュー & 承認      │                        │               │
│          │    /review-cc-work      │                        │               │
│          │                         │                        │               │
│          │ 6. 本番にデプロイ       │                        │               │
│          │    （PM判断）           │                        │               │
│          │                         │                        │               │
└──────────┴─────────────────────────┴────────────────────────┴───────────────┘
```

### ステップバイステップガイド

| ステップ | どこで | 何をするか |
|---------|-------|-----------|
| 1 | **Cursor** | やりたいことを伝える → Cursor が `/assign-to-cc` でタスクを作成 |
| 2 | **あなた** | Cursor からタスク指示をコピー |
| 3 | **Claude Code** | タスクを貼り付け → Claude Code が `/start-task` → 実装 |
| 4 | **Claude Code** | 完了したら `/handoff-to-cursor` → 完了報告を生成 |
| 5 | **あなた** | Claude Code から完了報告をコピー |
| 6 | **Cursor** | 報告を貼り付け → Cursor が `/review-cc-work` でレビュー |
| 7 | **Cursor** | 承認 or 修正依頼 → 必要なら繰り返し |

### セットアップ

`/setup-2agent` を実行すると、両方のエージェントに必要なファイルが作成されます：

```
作成されるファイル:
├── AGENTS.md           # 両エージェント共通のルール
├── CLAUDE.md           # Claude Code 固有の設定
├── Plans.md            # 共有のタスク追跡
└── .cursor/
    └── commands/
        ├── assign-to-cc.md      # PM がタスクを割り当てる用
        └── review-cc-work.md    # PM が完了をレビューする用
```

### タスク状態マーカー

| マーカー | 意味 | 誰が設定するか |
|---------|------|---------------|
| `cursor:requested` | PM がタスクを割り当て | Cursor |
| `cc:TODO` | 未着手 | Claude Code |
| `cc:WIP` | 作業中 | Claude Code |
| `cc:done` | 完了、レビュー待ち | Claude Code |
| `cursor:verified` | レビュー済み、承認 | Cursor |

---

## インストール

```bash
# マーケットプレースを追加
/plugin marketplace add Chachamaru127/cursor-cc-plugins

# プラグインをインストール
/plugin install cursor-cc-plugins
```

### チーム設定

チームで共有するには、`.claude/settings.json` に追加：

```json
{
  "extraKnownMarketplaces": {
    "cursor-cc-marketplace": {
      "source": {
        "source": "github",
        "repo": "Chachamaru127/cursor-cc-plugins"
      }
    }
  },
  "enabledPlugins": {
    "cursor-cc-plugins@cursor-cc-marketplace": true
  }
}
```

---

## 7. アーキテクチャ

> **v3 の新機能**: Skill / Workflow / Profile 分離によるモジュラーアーキテクチャ。詳細は [Architecture Documentation](docs/ARCHITECTURE.md) を参照。

### 概要

cursor-cc-plugins v3 は3層アーキテクチャを導入:

```
┌────────────────────────────────────────────────────────────┐
│  Profile 層    (誰が何を使うか)                             │
│  cursor-pm.yaml, claude-worker.yaml                        │
└──────────────────────────┬─────────────────────────────────┘
                           │
┌──────────────────────────▼─────────────────────────────────┐
│  Workflow 層   (どう流れるか)                               │
│  init.yaml, plan.yaml, work.yaml, review.yaml              │
└──────────────────────────┬─────────────────────────────────┘
                           │
┌──────────────────────────▼─────────────────────────────────┐
│  Skill 層      (何をするか)                                 │
│  SkillPort互換フロントマター付きの SKILL.md ファイル         │
└────────────────────────────────────────────────────────────┘
```

### スキルカテゴリ

| カテゴリ | 目的 | スキル例 |
|---------|------|---------|
| `core` | 基本原則、安全ルール | general-principles, diff-aware-editing |
| `pm` | 計画、要件整理 | init-requirements, plan-feature |
| `worker` | 実装、テスト | impl-feature, write-tests |
| `ci` | CI失敗対応 | analyze-failures, fix-tests |

### SkillPort 連携

**SkillPort を使うべき？**

| あなたは... | 結論 |
|-------------|------|
| 個人開発者 | **不要** - そのまま使える |
| チームでスキルを共有したい | **推奨** - チーム全体でスキルを共有 |
| Cursor + Claude Code 両方使う | **便利** - 同じスキル定義を共有 |

**SkillPort あり vs なし:**

| 項目 | なし | あり |
|------|------|------|
| セットアップ | 不要 | MCP 設定が必要 |
| スキル共有 | ローカルのみ | チーム全体で配布可能 |
| マルチツール対応 | Claude Code のみ | Cursor + Claude Code + 他の MCP クライアント |
| 推奨対象 | 個人利用 | チーム・企業 |

**SkillPort の具体的メリット:**

```
SkillPort なし（個人）:
┌─────────────────┐
│  あなたのPC     │
│  └── skills/    │  ← 自分しか使えない
└─────────────────┘

SkillPort あり（チーム）:
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│  Alice (Cursor) │     │  Bob (Claude)   │     │  CI サーバー     │
│       ↓         │     │       ↓         │     │       ↓         │
└────────┬────────┘     └────────┬────────┘     └────────┬────────┘
         │                       │                       │
         └───────────────────────┼───────────────────────┘
                                 ▼
                    ┌─────────────────────────┐
                    │  共有 skills/ リポジトリ  │
                    │  • レビュー基準が統一    │  ← 全員が同じルール
                    │  • コードスタイル統一    │
                    │  • 会社の標準を適用      │
                    └─────────────────────────┘
```

**例: チームコードレビューの一貫性**
- なし: Alice は5項目チェック、Bob は別の3項目をチェック
- あり: 全員が `ccp-review-security` を使用 → 同じ10個のセキュリティチェック

[SkillPort](https://github.com/Chachamaru127/skillport) MCP サーバー経由で Cursor と Claude Code 間でスキルを共有:

```json
// .cursor/mcp.json
{
  "mcpServers": {
    "ccp-skills": {
      "command": "uvx",
      "args": ["skillport"],
      "env": {
        "SKILLPORT_SKILLS_DIR": "/path/to/cursor-cc-plugins/skills",
        "SKILLPORT_ENABLED_CATEGORIES": "core,pm,worker,ci"
      }
    }
  }
}
```

### スキルの拡張

`skills/{category}/{skill-name}/SKILL.md` にカスタムスキルを作成:

```markdown
---
name: ccp-custom-my-skill
description: "このスキルの説明"
metadata:
  skillport:
    category: worker
    tags: [custom, example]
    alwaysApply: false
---

# My Custom Skill

スキルの内容...
```

### シンプルモード vs アドバンスドモード

| モード | 説明 | 対象ユーザー |
|--------|------|-------------|
| シンプル | 従来通りコマンドを使用 | ほとんどのユーザー |
| アドバンスド | YAML でワークフロー/スキルをカスタマイズ | パワーユーザー |

---

## コントリビュート

ガイドラインは [CONTRIBUTING.md](CONTRIBUTING.md) を参照してください。

## ライセンス

MIT License - 詳細は [LICENSE](LICENSE) を参照してください。

## リンク

- [GitHub リポジトリ](https://github.com/Chachamaru127/cursor-cc-plugins)
- [Claude Code ドキュメント](https://docs.anthropic.com/en/docs/claude-code)
- [問題を報告](https://github.com/Chachamaru127/cursor-cc-plugins/issues)
