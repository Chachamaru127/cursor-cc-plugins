---
name: ccp-plan-feature
description: "機能単位のタスクを Plans.md に分解して追記する"
metadata:
  skillport:
    category: pm
    tags: [planning, feature, tasks]
    alwaysApply: false
---

# Plan Feature

新しい機能の要望を受けて、実行可能なタスクリストに分解するスキル。

---

## 入力

- **機能の要望**: ユーザーからの自然言語での説明
- **既存の Plans.md**: 現在のタスク状況
- **リポジトリコンテキスト**: 技術スタック、既存コード

---

## 出力

- **Plans.md への新規タスク追加**
- **実装順序の提案**

---

## 実行手順

### Step 1: 機能の理解

ユーザーの要望を確認し、必要に応じて質問：

> 📋 **「{{機能名}}」について確認させてください：**
>
> - この機能で一番大事なことは何ですか？
> - 似ている機能がある既存サービスはありますか？

### Step 2: 既存コードの確認

```bash
# 関連しそうなファイルを探す
find . -name "*.ts" -o -name "*.tsx" | xargs grep -l "{{関連キーワード}}" | head -10

# 既存の構造を確認
ls -la src/
```

### Step 3: タスクの分解

機能を実装可能な単位に分解：

```markdown
## 🟡 {{機能名}} `cc:TODO`

### 準備
- [ ] 関連コードの調査 `cc:TODO`
- [ ] データモデルの設計 `cc:TODO`

### 実装
- [ ] {{コンポーネント1}} の作成 `cc:TODO`
- [ ] {{コンポーネント2}} の作成 `cc:TODO`
- [ ] API エンドポイントの追加 `cc:TODO`

### 統合
- [ ] ページへの組み込み `cc:TODO`
- [ ] 動作確認 `cc:TODO`
```

### Step 4: Plans.md への追記

既存の Plans.md に新しいセクションを追加：

```markdown
# 追加場所: 既存の TODO セクションの後

## 🟡 {{機能名}} `cc:TODO`

- [ ] {{タスク1}} `cc:TODO`
- [ ] {{タスク2}} `cc:TODO`
...
```

### Step 5: 次のアクションを提案

> ✅ **計画を追加しました！**
>
> **{{機能名}}** のタスク（{{件数}}件）を Plans.md に追加しました。
>
> **次にやること：**
> 「{{機能名}}を始めて」と言ってください。

---

## タスク分解の原則

### 1. 実行可能な粒度

```
❌ 悪い例: 「ユーザー機能を実装」
✅ 良い例: 「ログインフォームを作成」「認証 API を接続」
```

### 2. 依存関係を考慮

```markdown
# 正しい順序
1. データモデル定義
2. API エンドポイント
3. フロントエンド実装
4. 統合テスト
```

### 3. 確認ポイントを含める

```markdown
- [ ] API 実装 `cc:TODO`
- [ ] 動作確認（Postman等） `cc:TODO`  # ← 確認ポイント
- [ ] フロントエンド実装 `cc:TODO`
```

---

## フェーズ分けの目安

| フェーズ | 内容 | 目安の件数 |
|---------|------|-----------|
| 準備 | 調査、設計 | 2-3 件 |
| 実装 | コード作成 | 3-5 件 |
| 統合 | 結合、テスト | 2-3 件 |

---

## 注意事項

- **Plans.md の既存タスクを壊さない**: 追記のみ
- **マーカーを正しく付与**: `cc:TODO` を忘れずに
- **スコープを明確に**: 大きすぎる機能は分割を提案
