---
name: ccp-plan-review
description: "作成した計画（Plans.md）の妥当性をレビューし、改善点を提案する"
metadata:
  skillport:
    category: pm
    tags: [planning, review, validation]
    alwaysApply: false
---

# Plan Review

Plans.md に追加された計画の妥当性をチェックするスキル。
タスクの抜け漏れ、順序の問題、リスクを事前に発見します。

---

## 入力

- **Plans.md**: レビュー対象の計画
- **リポジトリコンテキスト**: 技術スタック、制約条件

---

## 出力

- **計画の評価**
- **改善提案**（あれば）

---

## レビュー観点

### 1. 完全性チェック

- [ ] 必要なタスクがすべて含まれているか
- [ ] 依存するタスクが先に実行される順序か
- [ ] テスト・確認タスクが含まれているか

### 2. 実現可能性チェック

- [ ] 各タスクは明確で実行可能か
- [ ] 技術スタックと整合しているか
- [ ] スコープが適切か（大きすぎない/小さすぎない）

### 3. リスクチェック

- [ ] 外部依存（API、サービス）は明確か
- [ ] 環境変数・設定が必要なタスクは特定されているか
- [ ] ブロックになりそうなポイントはないか

---

## 実行手順

### Step 1: Plans.md の読み込み

```bash
cat Plans.md
```

### Step 2: 計画の分析

各フェーズ・タスクを以下の観点で評価：

```markdown
## 📋 計画レビュー結果

### 全体評価: {{A / B / C}}

| 観点 | 評価 | コメント |
|------|------|---------|
| 完全性 | {{⭐⭐⭐}} | {{コメント}} |
| 実現可能性 | {{⭐⭐⭐}} | {{コメント}} |
| リスク | {{⭐⭐⭐}} | {{コメント}} |
```

### Step 3: 改善提案

問題がある場合は具体的な改善を提案：

```markdown
### 🔧 改善提案

1. **タスクの追加**
   - 「{{追加すべきタスク}}」を追加することを推奨

2. **順序の変更**
   - 「{{タスクA}}」を「{{タスクB}}」の前に移動

3. **タスクの分割**
   - 「{{大きなタスク}}」を以下に分割：
     - {{サブタスク1}}
     - {{サブタスク2}}
```

### Step 4: 結果の報告

> 📊 **計画レビュー完了**
>
> **評価**: {{A / B / C}}
>
> {{問題がない場合}}
> この計画で問題ありません。実行を開始できます。
>
> {{問題がある場合}}
> 上記の改善を適用しますか？

---

## 評価基準

| 評価 | 意味 |
|------|------|
| A | 問題なし、そのまま実行可能 |
| B | 軽微な改善点あり、実行は可能 |
| C | 重大な問題あり、修正が必要 |

---

## よくある問題パターン

### 1. 依存関係の逆転

```markdown
❌ 悪い例:
- [ ] フロントエンド実装
- [ ] API 設計

✅ 良い例:
- [ ] API 設計
- [ ] フロントエンド実装
```

### 2. テストの欠落

```markdown
❌ 悪い例:
- [ ] 機能 A 実装
- [ ] 機能 B 実装
- [ ] デプロイ

✅ 良い例:
- [ ] 機能 A 実装
- [ ] 機能 A テスト ← 追加
- [ ] 機能 B 実装
- [ ] 機能 B テスト ← 追加
- [ ] デプロイ
```

### 3. 曖昧なタスク

```markdown
❌ 悪い例:
- [ ] データベースを改善

✅ 良い例:
- [ ] users テーブルにインデックスを追加
- [ ] N+1 クエリを修正
```

---

## 注意事項

- **過度な修正を求めない**: 完璧を目指さない
- **VibeCoder への配慮**: 技術的な指摘は平易に説明
- **オプション扱い**: レビューは任意、スキップ可能
