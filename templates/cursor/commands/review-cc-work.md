# /review-cc-work - Claude Code 作業のレビュー

Claude Code（Worker）からの完了報告をレビューするコマンド。

---

## 使い方

Claude Code から完了報告を受け取ったら実行：

```
/review-cc-work
```

---

## 実行フロー

### Step 1: 完了報告の確認

Plans.md から `cc:完了` マーカーのタスクを抽出：

```bash
grep "cc:完了" Plans.md
```

### Step 2: 変更内容の確認

```bash
# 最近の変更を確認
git log --oneline -5
git diff HEAD~5 --stat
```

### Step 3: レビューチェックリスト

以下の観点でレビュー：

#### コード品質

- [ ] コードが読みやすいか
- [ ] 適切なエラーハンドリングがあるか
- [ ] 不要なコメントやデバッグコードがないか

#### 機能

- [ ] 依頼した機能が実装されているか
- [ ] エッジケースが考慮されているか
- [ ] 既存機能に影響がないか

#### テスト

- [ ] テストが追加されているか（必要な場合）
- [ ] CI が通過しているか

### Step 4: レビュー結果の入力

> **レビュー結果を選択してください：**
>
> 1. ✅ **承認** - 問題なし、マーカーを `cursor:確認済` に更新
> 2. 🔄 **修正依頼** - 問題あり、Claude Code に差し戻し
> 3. ❓ **確認事項あり** - 質問や確認が必要

### Step 5A: 承認の場合

Plans.md を更新：

```markdown
# 変更前
- [x] タスク名 `cc:完了`

# 変更後
- [x] タスク名 `cursor:確認済` ({{DATE}})
```

確認メッセージ：

> ✅ **レビュー完了**
>
> タスク「{{タスク名}}」を承認しました。
>
> **次のアクション**:
> - [ ] staging 環境での動作確認（必要な場合）
> - [ ] 本番デプロイの判断

### Step 5B: 修正依頼の場合

Plans.md を更新：

```markdown
# 変更前
- [x] タスク名 `cc:完了`

# 変更後
- [ ] タスク名 `cc:WIP` <!-- 差し戻し -->
  - 差し戻し理由: {{理由}}
```

Claude Code への差し戻しメッセージを生成：

```markdown
## 🔄 修正依頼

**タスク**: {{タスク名}}
**レビュー日時**: {{YYYY-MM-DD HH:MM}}

### 修正が必要な点

1. {{修正点1}}
2. {{修正点2}}

### 期待する修正

{{具体的な修正内容}}

---

**修正後、再度 `/handoff-to-cursor` で報告してください。**
```

---

## オプション

### 特定タスクのレビュー

```
/review-cc-work --task="ユーザー認証機能"
```

### 差分の詳細表示

```
/review-cc-work --show-diff
```

---

## 注意事項

- 完了報告がない場合は Claude Code に確認を促す
- 重大な問題がある場合は詳細なフィードバックを提供
- 承認後は本番デプロイの判断を忘れずに
